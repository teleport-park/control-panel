<div class="actions d-flex justify-content-end">
    <button mat-flat-button color="accent" (click)="add()">
        <mat-icon>add</mat-icon>
        {{translations.instant('ADD_SERVER_TITLE')}}
    </button>
</div>
<div class="row instances_wrapper">
    <div *ngFor="let item of service.instances$ | async" class="col-xl-4 col-lg-12 col-md-6 col-sm-12 col-12 instance">
        <control-panel-ui-hardware-item [item]="item" (grant)="grant($event)"
                                        (edit)="edit($event)"
                                        (remove)="remove($event)"
                                        (revoke)="revoke($event)"></control-panel-ui-hardware-item>
    </div>
</div>

<control-panel-trigger [callBack]="service.refresh.bind(service)"></control-panel-trigger>

<ng-template #formTemplate>
    <h4 mat-dialog-title>{{(_edit ? 'EDIT_SERVER_TITLE' : 'ADD_SERVER_TITLE') | translate}}</h4>
    <form [formGroup]="form" class="d-flex flex-column">
        <mat-form-field>
            <label>
                <input matInput placeholder="ip" formControlName="address">
            </label>
            <mat-error *ngIf="form.get('address')?.errors?.required">{{translations.instant('REQUIRED_FIELD', ['ip'])}}</mat-error>
            <mat-error *ngIf="form.get('address')?.errors?.pattern">{{translations.instant('SERVER_IP_INVALID_ERROR')}}</mat-error>
        </mat-form-field>
        <mat-form-field>
            <label>
                <input matInput placeholder="{{'NAME' | translate}}" formControlName="name">
            </label>
        </mat-form-field>
        <mat-checkbox formControlName="enabled">Enabled</mat-checkbox>
    </form>
    <control-panel-ui-action-toolbar (confirm)="submit()"
                                     (cancel)="_dialog.close()"
                                     [mode]="_edit ? 'edit' : 'add'"></control-panel-ui-action-toolbar>
</ng-template>
